define(["underscore","jquery","text!/admin/content/template/form.html?type=app_page"],function(a,b,c){var d="#content-form";return{defaults:{templates:{form:c,url:"/admin/api/pages<% if (!!id) { %>/<%= id %><% } %>?locale=<%= locale %>"},translations:{title:"public.title"}},layout:{extendExisting:!0,content:{width:"fixed",rightSpace:!1,leftSpace:!1}},initialize:function(){this.render(),this.bindDomEvents(),this.bindCustomEvents()},render:function(){this.$el.html(this.templates.form({translations:this.translations})),this.form=this.sandbox.form.create(d),this.form.initialized.then(function(){var a=this.data||{};this.sandbox.form.setData(d,a||{}).then(function(){this.sandbox.start(this.$el,{reset:!0})}.bind(this))}.bind(this))},bindDomEvents:function(){this.sandbox.dom.on(this.$el,"keyup",a.debounce(this.setDirty.bind(this),10),"input, textarea"),this.sandbox.dom.on(this.$el,"change",a.debounce(this.setDirty.bind(this),10),'input[type="checkbox"], select'),this.sandbox.on("sulu.content.changed",this.setDirty.bind(this))},setDirty:function(){this.sandbox.emit("sulu.tab.dirty")},bindCustomEvents:function(){this.sandbox.on("sulu.tab.save",this.save.bind(this))},save:function(){if(this.sandbox.form.validate(d)){var a=this.sandbox.form.getData(d),b=this.templates.url({id:this.data.id,locale:this.options.locale});a.template="default",this.sandbox.util.save(b,this.data.id?"PUT":"POST",a).then(function(a){this.sandbox.emit("sulu.tab.saved",a)}.bind(this))}},loadComponentData:function(){var a=b.Deferred();return a.resolve(this.options.data()),a}}});